### ç¬¬1-1é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬1é¡µ
Containers on AWS
--- ç¬¬1é¡µç»“æŸ ---

```

### ç¬¬2-2é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬2é¡µ
What is Docker?
â€¢ Docker is a software development platform to deploy apps
â€¢ Apps are packaged in containers that can be run on any OS
â€¢ Apps run the same, regardless of where theyâ€™re run
â€¢ Any machine
â€¢ No compatibility issues
â€¢ Predictable behavior
â€¢ Less work
â€¢ Easier to maintain and deploy
â€¢ Works with any language, any OS, any technology
â€¢ Use cases: microservices architecture, lift-and-shift apps from on-
premises to the AWS cloud, â€¦
--- ç¬¬2é¡µç»“æŸ ---

```

### ç¬¬3-3é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬3é¡µ
Docker on an OS
Server (e.g., EC2 instance)
--- ç¬¬3é¡µç»“æŸ ---

```

### ç¬¬4-4é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬4é¡µ
Where are Docker images stored?
â€¢ Docker images are stored in Docker Repositories
â€¢ Docker Hub (https://hub.docker.com)
â€¢ Public repository
â€¢ Find base images for many technologies or OS (e.g., Ubuntu, MySQL, â€¦)
â€¢ Amazon ECR (Amazon Elastic Container Registry)
â€¢ Private repository
â€¢ Public repository (Amazon ECR Public Gallery https://gallery.ecr.aws)
--- ç¬¬4é¡µç»“æŸ ---

```

### ç¬¬5-5é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬5é¡µ
Docker vs. Virtual Machines
â€¢ Docker is â€sort ofâ€ a virtualization technology, but not exactly
â€¢ Resources are shared with the host => many containers on one server
Infrastructure
Host OS
Hypervisor
Apps
Guest OS
(VM)
Apps
Guest OS
(VM)
Apps
Guest OS
(VM)
Infrastructure
Host OS (EC2 Instance)
Docker Daemon
--- ç¬¬5é¡µç»“æŸ ---

```

### ç¬¬6-6é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬6é¡µ
Getting Started with Docker
Dockerfile
image
Build
Run
container
Docker Repository
Amazon
ECR
Push
Pull
--- ç¬¬6é¡µç»“æŸ ---

```

### ç¬¬7-7é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬7é¡µ
Docker Containers Management on AWS
â€¢ Amazon Elastic Container Service (Amazon ECS)
â€¢ Amazonâ€™s own container platform
â€¢ Amazon Elastic Kubernetes Service (Amazon EKS)
â€¢ Amazonâ€™s managed Kubernetes (open source)
â€¢ AWS Fargate
â€¢ Amazonâ€™s own Serverless container platform
â€¢ Works with ECS and with EKS
â€¢ Amazon ECR:
â€¢ Store container images
Amazon ECS
AWS Fargate
Amazon EKS
Amazon ECR
--- ç¬¬7é¡µç»“æŸ ---

```

### ç¬¬8-8é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬8é¡µ
Amazon ECS - EC2 Launch Type
â€¢ ECS = Elastic Container Service
â€¢ Launch Docker containers on AWS =
Launch ECS Tasks on ECS Clusters
â€¢ EC2 Launch Type: you must provision
& maintain the infrastructure (the
EC2 instances)
â€¢ Each EC2 Instance must run the ECS
Agent to register in the ECS Cluster
â€¢ AWS takes care of starting / stopping
containers
Amazon ECS / ECS Cluster
New Docker
Container
EC2 Instance
EC2 Instance
EC2 Instance
ECS Agent
ECS Agent
ECS Agent
--- ç¬¬8é¡µç»“æŸ ---

```

### ç¬¬9-9é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬9é¡µ
Amazon ECS â€“ Fargate Launch Type
â€¢ Launch Docker containers on AWS
â€¢ You do not provision the infrastructure
(no EC2 instances to manage)
â€¢ Itâ€™s all Serverless!
â€¢ You just create task definitions
â€¢ AWS just runs ECS Tasks for you based
on the CPU / RAM you need
â€¢ To scale, just increase the number of
tasks. Simple - no more EC2 instances
AWS Fargate / ECS Cluster
New Docker
Container
--- ç¬¬9é¡µç»“æŸ ---

```

### ç¬¬10-10é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬10é¡µ
Amazon ECS â€“ IAM Roles for ECS
â€¢ EC2 Instance Profile (EC2 Launch Type
only):
â€¢ Used by the ECS agent
â€¢ Makes API calls to ECS service
â€¢ Send container logs to CloudWatch Logs
â€¢ Pull Docker image from ECR
â€¢ Reference sensitive data in Secrets Manager or
SSM Parameter Store
â€¢ ECS Task Role:
â€¢ Allows each task to have a specific role
â€¢ Use different roles for the different ECS Services
you run
â€¢ Task Role is defined in the task definition
EC2 Instance
ECS Agent
Task A
Task B
ECS
ECR
CloudWatch
Logs
EC2 Instance Profile
S3
DynamoDB
ECS Task A Role
ECS Task B Role
--- ç¬¬10é¡µç»“æŸ ---

```

### ç¬¬11-11é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬11é¡µ
Amazon ECS â€“ Load Balancer Integrations
â€¢ Application Load Balancer supported
and works for most use cases
â€¢ Network Load Balancer recommended
only for high throughput / high
performance use cases, or to pair it with
AWS Private Link
â€¢ Classic Load Balancer supported but
not recommended (no advanced
features â€“ no Fargate)
ECS Cluster
EC2 Instance
EC2 Instance
Application
Load Balancer
Users
ECS Task
ECS Task
ECS Task
ECS Task
80/443
--- ç¬¬11é¡µç»“æŸ ---

```

### ç¬¬12-12é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬12é¡µ
Amazon ECS â€“ Data Volumes (EFS)
â€¢ Mount EFS file systems onto ECS tasks
â€¢ Works for both EC2 and Fargate launch types
â€¢ Tasks running in any AZ will share the same data
in the EFS file system
â€¢ Fargate + EFS = Serverless
â€¢ Use cases: persistent multi-AZ shared storage for
your containers
â€¢ Note:
â€¢ Amazon S3 cannot be mounted as a file system
ECS Cluster
EC2 Instance
Fargate
Amazon EFS
File System
mount
mount
--- ç¬¬12é¡µç»“æŸ ---

```

### ç¬¬13-13é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬13é¡µ
ECS Service Auto Scaling
â€¢ Automatically increase/decrease the desired number of ECS tasks
â€¢ Amazon ECS Auto Scaling uses AWS Application Auto Scaling
â€¢ ECS Service Average CPU Utilization
â€¢ ECS Service Average Memory Utilization - Scale on RAM
â€¢ ALB Request Count Per Target â€“ metric coming from the ALB
â€¢ Target Tracking â€“ scale based on target value for a specific CloudWatch metric
â€¢ Step Scaling â€“ scale based on a specified CloudWatch Alarm
â€¢ Scheduled Scaling â€“ scale based on a specified date/time (predictable changes)
â€¢ ECS Service Auto Scaling (task level) â‰  EC2 Auto Scaling (EC2 instance level)
â€¢ Fargate Auto Scaling is much easier to setup (because Serverless)
--- ç¬¬13é¡µç»“æŸ ---

```

### ç¬¬14-14é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬14é¡µ
EC2 Launch Type â€“ Auto Scaling EC2 Instances
â€¢ Accommodate ECS Service Scaling by adding underlying EC2 Instances
â€¢ Auto Scaling Group Scaling
â€¢ Scale your ASG based on CPU Utilization
â€¢ Add EC2 instances over time
â€¢ ECS Cluster Capacity Provider
â€¢ Used to automatically provision and scale the infrastructure for your ECS Tasks
â€¢ Capacity Provider paired with an Auto Scaling Group
â€¢ Add EC2 Instances when youâ€™re missing capacity (CPU, RAMâ€¦)
--- ç¬¬14é¡µç»“æŸ ---

```

### ç¬¬15-15é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬15é¡µ
ECS Scaling â€“ Service CPU Usage Example
Service A
Auto Scaling Group
Scale ECS Capacity Providers
(optional)
Auto Scaling
Task 1
Task 2
CPU
Usage
CloudWatch Metric
(ECS Service CPU Usage)
CloudWatch Alarm
Trigger
Scale
Task 3
(new)
--- ç¬¬15é¡µç»“æŸ ---

```

### ç¬¬16-16é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬16é¡µ
ECS Rolling Updates
â€¢ When updating from v1 to v2, we can
control how many tasks can be started
and stopped, and in which order
v1
v1
v1
v1
v1
v1
v1
v1
v1
v2
v2
v2
Actual Running Capacity (100%)
Minimum Healthy Percent (0-100%)
Maximum Percent (100-200%)
Allowed to terminate tasks
Allowed to create tasks
ECS Service update screen
--- ç¬¬16é¡µç»“æŸ ---

```

### ç¬¬17-17é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬17é¡µ
ECS Rolling Update â€“ Min 50%, Max 100%
â€¢ Starting number of tasks: 4
v1
v1
v1
v1
v2
v2
v1
v1
v1
v1
v2
v2
v2
v2
v2
v2
--- ç¬¬17é¡µç»“æŸ ---

```

### ç¬¬18-18é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬18é¡µ
ECS Rolling Update â€“ Min 100%, Max 150%
â€¢ Starting number of tasks: 4
v1
v1
v1
v1
v2
v2
v1
v1
v1
v1
v2
v2
v2
v2
v2
v2
v1
v1
v2
v2
v2
v2
v1
v1
--- ç¬¬18é¡µç»“æŸ ---

```

### ç¬¬19-19é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬19é¡µ
ECS tasks invoked by Event Bridge
Client
Upload object
Amazon
EventBridge
VPC
Region
Amazon ECS Cluster
AWS Fargate
Task
(new)
S3 Bucket
Event
Rule: Run ECS Task
Amazon
DynamoDB
Save result
ECS Task Role
(Access S3 & DynamoDB)
Get object
--- ç¬¬19é¡µç»“æŸ ---

```

### ç¬¬20-20é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬20é¡µ
ECS tasks invoked by Event Bridge Schedule
Amazon
EventBridge
Amazon ECS Cluster
AWS Fargate
Task
(new)
Rule: Run ECS Task
Amazon S3
Batch Processing
Every 1 hour
ECS Task Role
Access S3
--- ç¬¬20é¡µç»“æŸ ---

```

### ç¬¬21-21é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬21é¡µ
ECS â€“ SQS Queue Example
Service A
ECS Service Auto Scaling
Task 1
Task 2
Task 3
SQS Queue
Messages
Poll for messages
--- ç¬¬21é¡µç»“æŸ ---

```

### ç¬¬22-22é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬22é¡µ
ECS â€“ Intercept Stopped Tasks using EventBridge
ECS Task
Containers
exited
EventBridge
event
Event Pattern
SNS
trigger
Administrator
email
--- ç¬¬22é¡µç»“æŸ ---

```

### ç¬¬23-23é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬23é¡µ
Amazon ECS â€“ Task Definitions
â€¢ Task definitions are metadata in JSON form to tell
ECS how to run a Docker container
â€¢ It contains crucial information, such as:
â€¢ Image Name
â€¢ Port Binding for Container and Host
â€¢ Memory and CPU required
â€¢ Environment variables
â€¢ Networking information
â€¢ IAM Role
â€¢ Logging configuration (ex CloudWatch)
â€¢ Can define up to 10 containers in a Task Definition
EC2 Instance
ECS Agent
Internet
Host Port
Container Port
8080
80
--- ç¬¬23é¡µç»“æŸ ---

```

### ç¬¬24-24é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬24é¡µ
Amazon ECS â€“ Load Balancing (EC2 Launch Type)
â€¢ We get a Dynamic Host
Port Mapping if you define
only the container port in
the task definition
â€¢ The ALB finds the right
port on your EC2
Instances
â€¢ You must allow on the
EC2 instanceâ€™s Security
Group any port from the
ALBâ€™s Security Group
ECS Cluster
EC2 Instance
EC2 Instance
Application
Load Balancer
36789
39586
39748
39856
Users
ECS Task
ECS Task
ECS Task
ECS Task
Dynamic
Host Port Mapping
80/443
--- ç¬¬24é¡µç»“æŸ ---

```

### ç¬¬25-25é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬25é¡µ
Amazon ECS â€“ Load Balancing (Fargate)
â€¢ Each task has a unique
private IP
â€¢ Only define the container
port (host port is not
applicable)
â€¢ Example
â€¢ ECS ENI Security Group
â€¢ Allow port 80 from the ALB
â€¢ ALB Security Group
â€¢ Allow port 80/443 from web
ECS Cluster
Application
Load Balancer
80
80
80
80
Users
ECS Task
ECS Task
ECS Task
ECS Task
80/443
172.16.4.5
172.17.35.88
172.18.8.192
172.16.4.6
--- ç¬¬25é¡µç»“æŸ ---

```

### ç¬¬26-26é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬26é¡µ
Amazon ECS
One IAM Role per Task Definition
S3
Service A
ECS Task A Role
Task Definition A
DynamoDB
Service B
ECS Task B Role
Task Definition B
--- ç¬¬26é¡µç»“æŸ ---

```

### ç¬¬27-27é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬27é¡µ
Amazon ECS â€“ Environment Variables
â€¢ Environment Variable
â€¢ Hardcoded â€“ e.g., URLs
â€¢ SSM Parameter Store â€“ sensitive variables (e.g., API keys, shared configs)
â€¢ Secrets Manager â€“ sensitive variables (e.g., DB passwords)
â€¢ Environment Files (bulk) â€“ Amazon S3
Task Definition
SSM Parameter Store
Secrets Manager
S3 Bucket
fetch values
fetch values
fetch files
--- ç¬¬27é¡µç»“æŸ ---

```

### ç¬¬28-28é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬28é¡µ
Amazon ECS â€“ Data Volumes (Bind Mounts)
â€¢ Share data between multiple containers in the
same Task Definition
â€¢ Works for both EC2 and Fargate tasks
â€¢ EC2 Tasks â€“ using EC2 instance storage
â€¢ Data are tied to the lifecycle of the EC2 instance
â€¢ Fargate Tasks â€“ using ephemeral storage
â€¢ Data are tied to the container(s) using them
â€¢ 20 GiB â€“ 200 GiB (default 20 GiB)
â€¢ Use cases:
â€¢ Share ephemeral data between multiple containers
â€¢ â€œSidecarâ€ container pattern, where the â€œsidecarâ€
container used to send metrics/logs to other
destinations (separation of conerns)
ECS Cluster
ECS Task
Application
Containers
Metrics & Logs
Container (Sidecar)
Shared Storage
(/var/logs/)
Bind Mount
write
read
--- ç¬¬28é¡µç»“æŸ ---

```

### ç¬¬29-29é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬29é¡µ
Amazon ECS â€“ Task Placement
â€¢ When an ECS task is started with EC2
Launch Type, ECS must determine
where to place it, with the constraints
of CPU and memory (RAM)
â€¢ Similarly, when a service scales in, ECS
needs to determine which task to
terminate
â€¢ You can define:
â€¢ Task Placement Strategy
â€¢ Task Placement Constraints
â€¢ Note: only for ECS Tasks with EC2
Launch Type (Fargate not supported)
Amazon ECS
New Docker
Container
EC2 Instance
EC2 Instance
EC2 Instance
?
--- ç¬¬29é¡µç»“æŸ ---

```

### ç¬¬30-30é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬30é¡µ
Amazon ECS â€“ Task Placement Process
â€¢ Task Placement Strategies are a best effort
â€¢ When Amazon ECS places a task, it uses the following process to select
the appropriate EC2 Container instance:
1.
Identify which instances that satisfy the CPU, memory, and port requirements
2.
Identify which instances that satisfy the Task Placement Constraints
3.
Identify which instances that satisfy the Task Placement Strategies
4.
Select the instances
--- ç¬¬30é¡µç»“æŸ ---

```

### ç¬¬31-31é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬31é¡µ
Amazon ECS â€“ Task Placement Strategies
â€¢ Binpack
â€¢ Tasks are placed on the least available amount of CPU and Memory
â€¢ Minimizes the number of EC2 instances in use (cost savings)
Amazon ECS
EC2 Instance
EC2 Instance
--- ç¬¬31é¡µç»“æŸ ---

```

### ç¬¬32-32é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬32é¡µ
Amazon ECS â€“ Task Placement Strategies
â€¢ Random
â€¢ Tasks are placed randomly
Amazon ECS
EC2 Instance
EC2 Instance
--- ç¬¬32é¡µç»“æŸ ---

```

### ç¬¬33-33é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬33é¡µ
Amazon ECS â€“ Task Placement Strategies
â€¢ Spread
â€¢ Tasks are placed evenly based on the specified value
â€¢ Example: instanceId, attribute:ecs.availability-zone, â€¦
us-east-1a
EC2 Instance
us-east-1b
EC2 Instance
us-east-1c
EC2 Instance
ECS Cluster
--- ç¬¬33é¡µç»“æŸ ---

```

### ç¬¬34-34é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬34é¡µ
Amazon ECS â€“ Task Placement Strategies
â€¢ You can mix them together
--- ç¬¬34é¡µç»“æŸ ---

```

### ç¬¬35-35é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬35é¡µ
Amazon ECS â€“ Task Placement Constraints
â€¢ distinctInstance
â€¢ Tasks are placed on a different EC2 instance
â€¢ memberOf
â€¢ Tasks are placed on EC2 instances that satisfy a specified expression
â€¢ Uses the Cluster Query Language (advanced)
--- ç¬¬35é¡µç»“æŸ ---

```

### ç¬¬36-36é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬36é¡µ
Amazon ECR
â€¢ ECR = Elastic Container Registry
â€¢ Store and manage Docker images on AWS
â€¢ Private and Public repository (Amazon ECR
Public Gallery https://gallery.ecr.aws)
â€¢ Fully integrated with ECS, backed by Amazon S3
â€¢ Access is controlled through IAM (permission
errors => policy)
â€¢ Supports image vulnerability scanning, versioning,
image tags, image lifecycle, â€¦
ECS Cluster
EC2 Instance
ECR Repository
Docker
Image A
Docker
Image B
IAM Role
pull
pull
--- ç¬¬36é¡µç»“æŸ ---

```

### ç¬¬37-37é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬37é¡µ
Amazon ECR â€“ Using AWS CLI
â€¢ Login Command
â€¢ AWS CLI v2
â€¢ Docker Commands
â€¢ Push
â€¢ Pull
â€¢ In case an EC2 instance (or you) canâ€™t pull a Docker image, check IAM
permissions
aws ecr get-login-password --region region | docker login --username AWS
--password-stdin aws_account_id.dkr.ecr.region.amazonaws.com
docker push aws_account_id.dkr.ecr.region.amazonaws.com/demo:latest
docker pull aws_account_id.dkr.ecr.region.amazonaws.com/demo:latest
--- ç¬¬37é¡µç»“æŸ ---

```

### ç¬¬38-38é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬38é¡µ
AWS Copilot
â€¢ CLI tool to build, release, and operate production-ready containerized apps
â€¢ Run your apps on AppRunner, ECS, and Fargate
â€¢ Helps you focus on building apps rather than setting up infrastructure
â€¢ Provisions all required infrastructure for containerized apps (ECS, VPC, ELB, ECRâ€¦)
â€¢ Automated deployments with one command using CodePipeline
â€¢ Deploy to multiple environments
â€¢ Troubleshooting, logs, health statusâ€¦
AWS Copilot
CLI for containerized
applications
Microservices Architecture
Use CLI or YAML to describe the
architecture of your applications
Well-architected
infrastructure setup
Deployment Pipeline
Effective Operations
and Troubleshooting
Amazon ECS
AWS Fargate
AWS App Runner
--- ç¬¬38é¡µç»“æŸ ---

```

### ç¬¬39-39é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬39é¡µ
Amazon EKS Overview
â€¢ Amazon EKS = Amazon Elastic Kubernetes Service
â€¢ It is a way to launch managed Kubernetes clusters on AWS
â€¢ Kubernetes is an open-source system for automatic deployment, scaling and
management of containerized (usually Docker) application
â€¢ Itâ€™s an alternative to ECS, similar goal but different API
â€¢ EKS supports EC2 if you want to deploy worker nodes or Fargate to deploy
serverless containers
â€¢ Use case: if your company is already using Kubernetes on-premises or in
another cloud, and wants to migrate to AWS using Kubernetes
â€¢ Kubernetes is cloud-agnostic (can be used in any cloud â€“ Azure, GCPâ€¦)
â€¢ For multiple regions, deploy one EKS cluster per region
â€¢ Collect logs and metrics using CloudWatch Container Insights
--- ç¬¬39é¡µç»“æŸ ---

```

### ç¬¬40-40é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬40é¡µ
Private subnet 3
Private subnet 1
Private subnet 2
Amazon EKS - Diagram
AWS Cloud
VPC
Availability Zone 1
Availability Zone 2
Availability Zone 3
Public subnet 1
Public subnet 2
Public subnet 3
NGW
NGW
NGW
ELB
ELB
EKS
Public
Service LB
ELB
Auto Scaling Group
EKS node
EKS Pods
EKS node
EKS Pods
EKS node
EKS Pods
EKS Worker Nodes
EKS
Private
Service LB
ELB
--- ç¬¬40é¡µç»“æŸ ---

```

### ç¬¬41-41é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬41é¡µ
Amazon EKS â€“ Node Types
â€¢ Managed Node Groups
â€¢ Creates and manages Nodes (EC2 instances) for you
â€¢ Nodes are part of an ASG managed by EKS
â€¢ Supports On-Demand or Spot Instances
â€¢ Self-Managed Nodes
â€¢ Nodes created by you and registered to the EKS cluster and managed by an ASG
â€¢ You can use prebuilt AMI - Amazon EKS Optimized AMI
â€¢ Supports On-Demand or Spot Instances
â€¢ AWS Fargate
â€¢ No maintenance required; no nodes managed
--- ç¬¬41é¡µç»“æŸ ---

```

### ç¬¬42-42é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬42é¡µ
Amazon EKS â€“ Data Volumes
â€¢ Need to specify StorageClass manifest on your EKS cluster
â€¢ Leverages a Container Storage Interface (CSI) compliant driver
â€¢ Support forâ€¦
â€¢ Amazon EBS
â€¢ Amazon EFS (works with Fargate)
â€¢ Amazon FSx for Lustre
â€¢ Amazon FSx for NetApp ONTAP
--- ç¬¬42é¡µç»“æŸ ---

```

### ç¬¬43-43é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬43é¡µ
AWS Elastic Beanstalk
Deploying applications in AWS safely and predictably
--- ç¬¬43é¡µç»“æŸ ---

```