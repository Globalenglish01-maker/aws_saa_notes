### ç¬¬1-1é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬1é¡µ
Amazon S3
--- ç¬¬1é¡µç»“æŸ ---

```

### ç¬¬2-2é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬2é¡µ
Section introduction
â€¢ Amazon S3 is one of the main building blocks of AWS
â€¢ Itâ€™s advertised as â€infinitely scalingâ€ storage
â€¢ Many websites use Amazon S3 as a backbone
â€¢ Many AWS services use Amazon S3 as an integration as well
â€¢ Weâ€™ll have a step-by-step approach to S3
--- ç¬¬2é¡µç»“æŸ ---

```

### ç¬¬3-3é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬3é¡µ
Amazon S3 Use cases
â€¢ Backup and storage
â€¢ Disaster Recovery
â€¢ Archive
â€¢ Hybrid Cloud storage
â€¢ Application hosting
â€¢ Media hosting
â€¢ Data lakes & big data analytics
â€¢ Software delivery
â€¢ Static website
Nasdaq stores 7 years of
data into S3 Glacier
Sysco runs analytics on
its data and gain business
insights
--- ç¬¬3é¡µç»“æŸ ---

```

### ç¬¬4-4é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬4é¡µ
Amazon S3 - Buckets
â€¢ Amazon S3 allows people to store objects (files) in â€œbucketsâ€ (directories)
â€¢ Buckets must have a globally unique name (across all regions all accounts)
â€¢ Buckets are defined at the region level
â€¢ S3 looks like a global service but buckets are created in a region
â€¢ Naming convention
â€¢ No uppercase, No underscore
â€¢ 3-63 characters long
â€¢ Not an IP
â€¢ Must start with lowercase letter or number
â€¢ Must NOT start with the prefix xn--
â€¢ Must NOT end with the suffix -s3alias
S3 Bucket
--- ç¬¬4é¡µç»“æŸ ---

```

### ç¬¬5-5é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬5é¡µ
Amazon S3 - Objects
â€¢ Objects (files) have a Key
â€¢ The key is the FULL path:
â€¢ s3://my-bucket/my_file.txt
â€¢ s3://my-bucket/my_folder1/another_folder/my_file.txt
â€¢ The key is composed of prefix + object name
â€¢ s3://my-bucket/my_folder1/another_folder/my_file.txt
â€¢ Thereâ€™s no concept of â€œdirectoriesâ€ within buckets
(although the UI will trick you to think otherwise)
â€¢ Just keys with very long names that contain slashes (â€œ/â€)
S3 Bucket
with Objects
Object
--- ç¬¬5é¡µç»“æŸ ---

```

### ç¬¬6-6é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬6é¡µ
Amazon S3 â€“ Objects (cont.)
â€¢ Object values are the content of the body:
â€¢ Max. Object Size is 5TB (5000GB)
â€¢ If uploading more than 5GB, must use â€œmulti-part uploadâ€
â€¢ Metadata (list of text key / value pairs â€“ system or user metadata)
â€¢ Tags (Unicode key / value pair â€“ up to 10) â€“ useful for security / lifecycle
â€¢ Version ID (if versioning is enabled)
--- ç¬¬6é¡µç»“æŸ ---

```

### ç¬¬7-7é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬7é¡µ
Amazon S3 â€“ Security
â€¢ User-Based
â€¢ IAM Policies â€“ which API calls should be allowed for a specific user from IAM
â€¢ Resource-Based
â€¢ Bucket Policies â€“ bucket wide rules from the S3 console - allows cross account
â€¢ Object Access Control List (ACL) â€“ finer grain (can be disabled)
â€¢ Bucket Access Control List (ACL) â€“ less common (can be disabled)
â€¢ Note: an IAM principal can access an S3 object if
â€¢ The user IAM permissions ALLOW it OR the resource policy ALLOWS it
â€¢ AND thereâ€™s no explicit DENY
â€¢ Encryption: encrypt objects in Amazon S3 using encryption keys
--- ç¬¬7é¡µç»“æŸ ---

```

### ç¬¬8-8é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬8é¡µ
S3 Bucket Policies
â€¢ JSON based policies
â€¢ Resources: buckets and objects
â€¢ Effect: Allow / Deny
â€¢ Actions: Set of API to Allow or Deny
â€¢ Principal: The account or user to apply the
policy to
â€¢ Use S3 bucket for policy to:
â€¢ Grant public access to the bucket
â€¢ Force objects to be encrypted at upload
â€¢ Grant access to another account (Cross
Account)
--- ç¬¬8é¡µç»“æŸ ---

```

### ç¬¬9-9é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬9é¡µ
Example: Public Access - Use Bucket Policy
S3 Bucket
Anonymous www website visitor
S3 Bucket Policy
Allows Public Access
--- ç¬¬9é¡µç»“æŸ ---

```

### ç¬¬10-10é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬10é¡µ
Example: User Access to S3 â€“ IAM permissions
S3 Bucket
IAM Policy
IAM User
--- ç¬¬10é¡µç»“æŸ ---

```

### ç¬¬11-11é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬11é¡µ
Example: EC2 instance access - Use IAM Roles
S3 Bucket
EC2 Instance Role
IAM permissions
EC2 Instance
--- ç¬¬11é¡µç»“æŸ ---

```

### ç¬¬12-12é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬12é¡µ
Advanced: Cross-Account Access â€“
Use Bucket Policy
S3 Bucket
IAM User
Other AWS account
S3 Bucket Policy
Allows Cross-Account
--- ç¬¬12é¡µç»“æŸ ---

```

### ç¬¬13-13é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬13é¡µ
Bucket settings for Block Public Access
â€¢ These settings were created to prevent company data leaks
â€¢ If you know your bucket should never be public, leave these on
â€¢ Can be set at the account level
--- ç¬¬13é¡µç»“æŸ ---

```

### ç¬¬14-14é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬14é¡µ
Amazon S3 â€“ Static Website Hosting
â€¢ S3 can host static websites and have them accessible on
the Internet
â€¢ The website URL will be (depending on the region)
â€¢ http://bucket-name.s3-website-aws-region.amazonaws.com
OR
â€¢ http://bucket-name.s3-website.aws-region.amazonaws.com
â€¢ If you get a 403 Forbidden error, make sure the bucket
policy allows public reads!
S3 Bucket
(demo-bucket)
us-west-2
User
http://demo-bucket.s3-website-us-west-2.amazonaws.com
http://demo-bucket.s3-website.us-west-2.amazonaws.com
--- ç¬¬14é¡µç»“æŸ ---

```

### ç¬¬15-15é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬15é¡µ
Amazon S3 - Versioning
â€¢ You can version your files in Amazon S3
â€¢ It is enabled at the bucket level
â€¢ Same key overwrite will change the â€œversionâ€: 1, 2, 3â€¦.
â€¢ It is best practice to version your buckets
â€¢ Protect against unintended deletes (ability to restore a version)
â€¢ Easy roll back to previous version
â€¢ Notes:
â€¢ Any file that is not versioned prior to enabling versioning will
have version â€œnullâ€
â€¢ Suspending versioning does not delete the previous versions
S3 Bucket
(my-bucket)
s3://my-bucket/my-file.docx
User
upload
Version 1
Version 2
Version 3
--- ç¬¬15é¡µç»“æŸ ---

```

### ç¬¬16-16é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬16é¡µ
Amazon S3 â€“ Replication (CRR & SRR)
â€¢ Must enable Versioning in source and destination buckets
â€¢ Cross-Region Replication (CRR)
â€¢ Same-Region Replication (SRR)
â€¢ Buckets can be in different AWS accounts
â€¢ Copying is asynchronous
â€¢ Must give proper IAM permissions to S3
â€¢ Use cases:
â€¢ CRR â€“ compliance, lower latency access, replication across
accounts
â€¢ SRR â€“ log aggregation, live replication between production and test
accounts
S3 Bucket
(eu-west-1)
S3 Bucket
(us-east-2)
asynchronous
replication
--- ç¬¬16é¡µç»“æŸ ---

```

### ç¬¬17-17é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬17é¡µ
Amazon S3 â€“ Replication (Notes)
â€¢ After you enable Replication, only new objects are replicated
â€¢ Optionally, you can replicate existing objects using S3 Batch Replication
â€¢ Replicates existing objects and objects that failed replication
â€¢ For DELETE operations
â€¢ Can replicate delete markers from source to target (optional setting)
â€¢ Deletions with a version ID are not replicated (to avoid malicious deletes)
â€¢ There is no â€œchainingâ€ of replication
â€¢ If bucket 1 has replication into bucket 2, which has replication into bucket 3
â€¢ Then objects created in bucket 1 are not replicated to bucket 3
--- ç¬¬17é¡µç»“æŸ ---

```

### ç¬¬18-18é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬18é¡µ
S3 Storage Classes
â€¢ Amazon S3 Standard - General Purpose
â€¢ Amazon S3 Standard-Infrequent Access (IA)
â€¢ Amazon S3 One Zone-Infrequent Access
â€¢ Amazon S3 Glacier Instant Retrieval
â€¢ Amazon S3 Glacier Flexible Retrieval
â€¢ Amazon S3 Glacier Deep Archive
â€¢ Amazon S3 Intelligent Tiering
â€¢ Can move between classes manually or using S3 Lifecycle configurations
--- ç¬¬18é¡µç»“æŸ ---

```

### ç¬¬19-19é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬19é¡µ
S3 Durability and Availability
â€¢ Durability:
â€¢ High durability (99.999999999%, 11 9â€™s) of objects across multiple AZ
â€¢ If you store 10,000,000 objects with Amazon S3, you can on average expect to
incur a loss of a single object once every 10,000 years
â€¢ Same for all storage classes
â€¢ Availability:
â€¢ Measures how readily available a service is
â€¢ Varies depending on storage class
â€¢ Example: S3 standard has 99.99% availability = not available 53 minutes a year
--- ç¬¬19é¡µç»“æŸ ---

```

### ç¬¬20-20é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬20é¡µ
S3 Standard â€“ General Purpose
â€¢ 99.99% Availability
â€¢ Used for frequently accessed data
â€¢ Low latency and high throughput
â€¢ Sustain 2 concurrent facility failures
â€¢ Use Cases: Big Data analytics, mobile & gaming applications, content
distributionâ€¦
--- ç¬¬20é¡µç»“æŸ ---

```

### ç¬¬21-21é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬21é¡µ
S3 Storage Classes â€“ Infrequent Access
â€¢ For data that is less frequently accessed, but requires rapid access when needed
â€¢ Lower cost than S3 Standard
â€¢ Amazon S3 Standard-Infrequent Access (S3 Standard-IA)
â€¢ 99.9% Availability
â€¢ Use cases: Disaster Recovery, backups
â€¢ Amazon S3 One Zone-Infrequent Access (S3 One Zone-IA)
â€¢ High durability (99.999999999%) in a single AZ; data lost when AZ is destroyed
â€¢ 99.5% Availability
â€¢ Use Cases: Storing secondary backup copies of on-premises data, or data you can recreate
--- ç¬¬21é¡µç»“æŸ ---

```

### ç¬¬22-22é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬22é¡µ
Amazon S3 Glacier Storage Classes
â€¢ Low-cost object storage meant for archiving / backup
â€¢ Pricing: price for storage + object retrieval cost
â€¢ Amazon S3 Glacier Instant Retrieval
â€¢ Millisecond retrieval, great for data accessed once a quarter
â€¢ Minimum storage duration of 90 days
â€¢ Amazon S3 Glacier Flexible Retrieval (formerly Amazon S3 Glacier):
â€¢ Expedited (1 to 5 minutes), Standard (3 to 5 hours), Bulk (5 to 12 hours) â€“ free
â€¢ Minimum storage duration of 90 days
â€¢ Amazon S3 Glacier Deep Archive â€“ for long term storage:
â€¢ Standard (12 hours), Bulk (48 hours)
â€¢ Minimum storage duration of 180 days
--- ç¬¬22é¡µç»“æŸ ---

```

### ç¬¬23-23é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬23é¡µ
S3 Intelligent-Tiering
â€¢ Small monthly monitoring and auto-tiering fee
â€¢ Moves objects automatically between Access Tiers based on usage
â€¢ There are no retrieval charges in S3 Intelligent-Tiering
â€¢ Frequent Access tier (automatic): default tier
â€¢ Infrequent Access tier (automatic): objects not accessed for 30 days
â€¢ Archive Instant Access tier (automatic): objects not accessed for 90 days
â€¢ Archive Access tier (optional): configurable from 90 days to 700+ days
â€¢ Deep Archive Access tier (optional): config. from 180 days to 700+ days
--- ç¬¬23é¡µç»“æŸ ---

```

### ç¬¬24-24é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬24é¡µ
S3 Storage Classes Comparison
https://aws.amazon.com/s3/storage-classes/
Standard
Intelligent-
Tiering
Standard-IA
One Zone-IA
Glacier Instant
Retrieval
Glacier Flexible
Retrieval
Glacier Deep
Archive
Durability
99.999999999% == (11 9â€™s)
Availability
99.99%
99.9%
99.9%
99.5%
99.9%
99.99%
99.99%
Availability SLA
99.9%
99%
99%
99%
99%
99.9%
99.9%
Availability
Zones
>= 3
>= 3
>= 3
1
>= 3
>= 3
>= 3
Min. Storage
Duration Charge
None
None
30 Days
30 Days
90 Days
90 Days
180 Days
Min. Billable
Object Size
None
None
128 KB
128 KB
128 KB
40 KB
40 KB
Retrieval Fee
None
None
Per GB retrieved
Per GB retrieved
Per GB retrieved
Per GB retrieved
Per GB retrieved
--- ç¬¬24é¡µç»“æŸ ---

```

### ç¬¬25-25é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬25é¡µ
S3 Storage Classes â€“ Price Comparison
Example: us-east-1
https://aws.amazon.com/s3/pricing/
Standard
Intelligent-Tiering
Standard-IA
One Zone-IA
Glacier Instant
Retrieval
Glacier Flexible
Retrieval
Glacier Deep
Archive
Storage Cost
(per GB per month)
$0.023
$0.0025 - $0.023
$0.0125
$0.01
$0.004
$0.0036
$0.00099
Retrieval Cost
(per 1000 request)
GET: $0.0004
POST: $0.005
GET: $0.0004
POST: $0.005
GET: $0.001
POST: $0.01
GET: $0.001
POST: $0.01
GET: $0.01
POST: $0.02
GET: $0.0004
POST: $0.03
Expedited: $10
Standard: $0.05
Bulk: free
GET: $0.0004
POST: $0.05
Standard: $0.10
Bulk: $0.025
Retrieval Time
Instantaneous
Expedited (1 â€“ 5 mins)
Standard (3 â€“ 5 hours)
Bulk (5 â€“ 12 hours)
Standard (12 hours)
Bulk (48 hours)
Monitoring Cost
(per 1000 objects)
$0.0025
--- ç¬¬25é¡µç»“æŸ ---

```

### ç¬¬26-26é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬26é¡µ
AWS CLI, SDK, IAM Roles &
Policies
--- ç¬¬26é¡µç»“æŸ ---

```

### ç¬¬27-27é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬27é¡µ
EC2 Instance Metadata (IMDS)
â€¢ AWS EC2 Instance Metadata (IMDS) is powerful but one of the least known
features to developers
â€¢ It allows AWS EC2 instances to â€learn about themselvesâ€ without using an
IAM Role for that purpose.
â€¢ The URL is http://169.254.169.254/latest/meta-data
â€¢ You can retrieve the IAM Role name from the metadata, but you CANNOT
retrieve the IAM Policy.
â€¢ Metadata = Info about the EC2 instance
â€¢ Userdata = launch script of the EC2 instance
â€¢ Letâ€™s practice and see what we can do with it!
--- ç¬¬27é¡µç»“æŸ ---

```

### ç¬¬28-28é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬28é¡µ
â€¢ IMDSv1 is accessing http://169.254.169.254/latest/meta-data directly
â€¢ IMDSv2 is more secure and is done in two steps:
1.
Get Session Token (limited validity) â€“ using headers & PUT
2.
Use Session Token in IMDSv2 calls â€“ using headers
IMDSv2 vs. IMDSv1
--- ç¬¬28é¡µç»“æŸ ---

```

### ç¬¬29-29é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬29é¡µ
MFA with CLI
â€¢ To use MFA with the CLI, you must create a temporary session
â€¢ To do so, you must run the STS GetSessionToken API call
â€¢ aws sts get-session-token --serial-number arn-of-the-mfa-device --token-
code code-from-token --duration-seconds 3600
--- ç¬¬29é¡µç»“æŸ ---

```

### ç¬¬30-30é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬30é¡µ
AWS SDK Overview
â€¢ What if you want to perform actions on AWS directly from your applications
code ? (without using the CLI).
â€¢ You can use an SDK (software development kit) !
â€¢ Official SDKs areâ€¦
â€¢ Java
â€¢ .NET
â€¢ Node.js
â€¢ PHP
â€¢ Python (named boto3 / botocore)
â€¢ Go
â€¢ Ruby
â€¢ C++
--- ç¬¬30é¡µç»“æŸ ---

```

### ç¬¬31-31é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬31é¡µ
AWS SDK Overview
â€¢ We have to use the AWS SDK when coding against AWS Services such
as DynamoDB
â€¢ Fun factâ€¦ the AWS CLI uses the Python SDK (boto3)
â€¢ The exam expects you to know when you should use an SDK
â€¢ Weâ€™ll practice the AWS SDK when we get to the Lambda functions
â€¢ Good to know: if you donâ€™t specify or configure a default region, then
us-east-1 will be chosen by default
--- ç¬¬31é¡µç»“æŸ ---

```

### ç¬¬32-32é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬32é¡µ
AWS Limits (Quotas)
â€¢ API Rate Limits
â€¢ DescribeInstances API for EC2 has a limit of 100 calls per seconds
â€¢ GetObject on S3 has a limit of 5500 GET per second per prefix
â€¢ For Intermittent Errors: implement Exponential Backoff
â€¢ For Consistent Errors: request an API throttling limit increase
â€¢ Service Quotas (Service Limits)
â€¢ Running On-Demand Standard Instances: 1152 vCPU
â€¢ You can request a service limit increase by opening a ticket
â€¢ You can request a service quota increase by using the Service Quotas API
--- ç¬¬32é¡µç»“æŸ ---

```

### ç¬¬33-33é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬33é¡µ
Exponential Backoff (any AWS service)
â€¢ If you get ThrottlingException intermittently, use exponential backoff
â€¢ Retry mechanism already included in AWS SDK API calls
â€¢ Must implement yourself if using the AWS API as-is or in specific cases
â€¢ Must only implement the retries on 5xx server errors and throttling
â€¢ Do not implement on the 4xx client errors
1
2
3
4
5
--- ç¬¬33é¡µç»“æŸ ---

```

### ç¬¬34-34é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬34é¡µ
AWS CLI Credentials Provider Chain
â€¢ The CLI will look for credentials in this order
1.
Command line options â€“ --region, --output, and --profile
2.
Environment variables â€“ AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY,
and AWS_SESSION_TOKEN
3.
CLI credentials file â€“aws configure
~/.aws/credentials on Linux / Mac & C:\Users\user\.aws\credentials on Windows
4.
CLI configuration file â€“ aws configure
~/.aws/config on Linux / macOS & C:\Users\USERNAME\.aws\config on Windows
5.
Container credentials â€“ for ECS tasks
6.
Instance profile credentials â€“ for EC2 Instance Profiles
--- ç¬¬34é¡µç»“æŸ ---

```

### ç¬¬35-35é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬35é¡µ
AWS SDK Default Credentials Provider Chain
â€¢ The Java SDK (example) will look for credentials in this order
1. Java system properties â€“ aws.accessKeyId and aws.secretKey
2. Environment variables â€“
AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY
3. The default credential profiles file â€“ ex at: ~/.aws/credentials, shared by
many SDK
4. Amazon ECS container credentials â€“ for ECS containers
5. Instance profile credentialsâ€“ used on EC2 instances
--- ç¬¬35é¡µç»“æŸ ---

```

### ç¬¬36-36é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬36é¡µ
AWS Credentials Scenario
â€¢ An application deployed on an EC2 instance is using environment variables
with credentials from an IAM user to call the Amazon S3 API.
â€¢ The IAM user has S3FullAccess permissions.
â€¢ The application only uses one S3 bucket, so according to best practices:
â€¢ An IAM Role & EC2 Instance Profile was created for the EC2 instance
â€¢ The Role was assigned the minimum permissions to access that one S3 bucket
â€¢ The IAM Instance Profile was assigned to the EC2 instance, but it still
had access to all S3 buckets. Why?
the credentials chain is still giving priorities to the environment variables
--- ç¬¬36é¡µç»“æŸ ---

```

### ç¬¬37-37é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬37é¡µ
AWS Credentials Best Practices
â€¢ Overall, NEVER EVER STORE AWS CREDENTIALS IN YOUR CODE
â€¢ Best practice is for credentials to be inherited from the credentials chain
â€¢ If using working within AWS, use IAM Roles
â€¢ => EC2 Instances Roles for EC2 Instances
â€¢ => ECS Roles for ECS tasks
â€¢ => Lambda Roles for Lambda functions
â€¢ If working outside of AWS, use environment variables / named profiles
--- ç¬¬37é¡µç»“æŸ ---

```

### ç¬¬38-38é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬38é¡µ
Signing AWS API requests
â€¢ When you call the AWS HTTP API, you sign the request so that AWS
can identify you, using your AWS credentials (access key & secret key)
â€¢ Note: some requests to Amazon S3 donâ€™t need to be signed
â€¢ If you use the SDK or CLI, the HTTP requests are signed for you
â€¢ You should sign an AWS HTTP request using Signature v4 (SigV4)
--- ç¬¬38é¡µç»“æŸ ---

```

### ç¬¬39-39é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬39é¡µ
SigV4 Request examples
â€¢ HTTP Header option (signature in Authorization header)
â€¢ Query String option, ex: S3 pre-signed URLs (signature in X-Amz-Signature)
--- ç¬¬39é¡µç»“æŸ ---

```

### ç¬¬40-40é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬40é¡µ
Amazon S3 â€“ Advanced
--- ç¬¬40é¡µç»“æŸ ---

```

### ç¬¬41-41é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬41é¡µ
Amazon S3 â€“ Moving between Storage Classes
â€¢ You can transition objects between
storage classes
â€¢ For infrequently accessed object,
move them to Standard IA
â€¢ For archive objects that you donâ€™t
need fast access to, move them to
Glacier or Glacier Deep Archive
â€¢ Moving objects can be automated
using a Lifecycle Rules
Standard
Standard IA
Intelligent Tiering
One-Zone IA
Glacier Instant Retrieval
Glacier Flexible Retrieval
Glacier Deep Archive
--- ç¬¬41é¡µç»“æŸ ---

```

### ç¬¬42-42é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬42é¡µ
Amazon S3 â€“ Lifecycle Rules
â€¢ Transition Actions â€“ configure objects to transition to another storage class
â€¢ Move objects to Standard IA class 60 days after creation
â€¢ Move to Glacier for archiving after 6 months
â€¢ Expiration actions â€“ configure objects to expire (delete) after some time
â€¢ Access log files can be set to delete after a 365 days
â€¢ Can be used to delete old versions of files (if versioning is enabled)
â€¢ Can be used to delete incomplete Multi-Part uploads
â€¢ Rules can be created for a certain prefix (example: s3://mybucket/mp3/*)
â€¢ Rules can be created for certain objects Tags (example: Department: Finance)
--- ç¬¬42é¡µç»“æŸ ---

```

### ç¬¬43-43é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬43é¡µ
Amazon S3 â€“ Lifecycle Rules (Scenario 1)
â€¢ Your application on EC2 creates images thumbnails after profile
photos are uploaded to Amazon S3. These thumbnails can be easily
recreated, and only need to be kept for 60 days. The source images
should be able to be immediately retrieved for these 60 days, and
afterwards, the user can wait up to 6 hours. How would you design
this?
â€¢ S3 source images can be on Standard, with a lifecycle configuration to
transition them to Glacier after 60 days
â€¢ S3 thumbnails can be on One-Zone IA, with a lifecycle configuration to
expire them (delete them) after 60 days
--- ç¬¬43é¡µç»“æŸ ---

```

### ç¬¬44-44é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬44é¡µ
Amazon S3 â€“ Lifecycle Rules (Scenario 2)
â€¢ A rule in your company states that you should be able to recover your
deleted S3 objects immediately for 30 days, although this may happen
rarely. After this time, and for up to 365 days, deleted objects should
be recoverable within 48 hours.
â€¢ Enable S3 Versioning in order to have object versions, so that â€œdeleted
objectsâ€ are in fact hidden by a â€œdelete markerâ€ and can be recovered
â€¢ Transition the â€œnoncurrent versionsâ€ of the object to Standard IA
â€¢ Transition afterwards the â€œnoncurrent versionsâ€ to Glacier Deep Archive
--- ç¬¬44é¡µç»“æŸ ---

```

### ç¬¬45-45é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬45é¡µ
Amazon S3 Analytics â€“ Storage Class Analysis
â€¢ Help you decide when to transition objects to
the right storage class
â€¢ Recommendations for Standard and Standard
IA
â€¢ Does NOT work for One-Zone IA or Glacier
â€¢ Report is updated daily
â€¢ 24 to 48 hours to start seeing data analysis
â€¢ Good first step to put together Lifecycle Rules
(or improve them)!
S3 Bucket
S3 Analytics
Date
StorageClass
ObjectAge
8/22/2022
STANDARD
000-014
8/25/2022
STANDARD
030-044
9/6/2022
STANDARD
120-149
.csv report
--- ç¬¬45é¡µç»“æŸ ---

```

### ç¬¬46-46é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬46é¡µ
S3 Event Notifications
Amazon S3
events
Lambda Function
SQS
SNS
â€¢ S3:ObjectCreated, S3:ObjectRemoved,
S3:ObjectRestore, S3:Replicationâ€¦
â€¢ Object name filtering possible (*.jpg)
â€¢ Use case: generate thumbnails of images
uploaded to S3
â€¢ Can create as many â€œS3 eventsâ€ as desired
â€¢ S3 event notifications typically deliver events
in seconds but can sometimes take a minute
or longer
--- ç¬¬46é¡µç»“æŸ ---

```

### ç¬¬47-47é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬47é¡µ
S3 Event Notifications â€“ IAM Permissions
Amazon S3
events
Lambda Function
SQS
SNS
Lambda Resource Policy
SNS Resource (Access) Policy
SQS Resource (Access) Policy
--- ç¬¬47é¡µç»“æŸ ---

```

### ç¬¬48-48é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬48é¡µ
S3 Event Notifications
with Amazon EventBridge
Amazon S3
bucket
events
All events
Amazon
EventBridge
rules
Over 18
AWS services
as destinations
â€¢ Advanced filtering options with JSON rules (metadata, object size,
name...)
â€¢ Multiple Destinations â€“ ex Step Functions, Kinesis Streams / Firehoseâ€¦
â€¢ EventBridge Capabilities â€“ Archive, Replay Events, Reliable delivery
--- ç¬¬48é¡µç»“æŸ ---

```

### ç¬¬49-49é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬49é¡µ
S3 â€“ Baseline Performance
â€¢ Amazon S3 automatically scales to high request rates, latency 100-200 ms
â€¢ Your application can achieve at least 3,500 PUT/COPY/POST/DELETE or
5,500 GET/HEAD requests per second per prefix in a bucket.
â€¢ There are no limits to the number of prefixes in a bucket.
â€¢ Example (object path => prefix):
â€¢ bucket/folder1/sub1/file  => /folder1/sub1/
â€¢ bucket/folder1/sub2/file  => /folder1/sub2/
â€¢ bucket/1/file                  => /1/
â€¢ bucket/2/file                  => /2/
â€¢ If you spread reads across all four prefixes evenly, you can achieve 22,000
requests per second for GET and HEAD
--- ç¬¬49é¡µç»“æŸ ---

```

### ç¬¬50-50é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬50é¡µ
S3 Performance
â€¢ Multi-Part upload:
â€¢ recommended for files > 100MB,
must use for files > 5GB
â€¢ Can help parallelize uploads (speed
up transfers)
â€¢ S3 Transfer Acceleration
â€¢ Increase transfer speed by transferring
file to an AWS edge location which will
forward the data to the S3 bucket in the
target region
â€¢ Compatible with multi-part upload
Amazon S3
Parallel uploads
Divide
In parts
BIG file
S3 Bucket
Australia
Edge Location
USA
Fast
(public www)
Fast
(private AWS)
File in USA
--- ç¬¬50é¡µç»“æŸ ---

```

### ç¬¬51-51é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬51é¡µ
S3 Performance â€“ S3 Byte-Range Fetches
â€¢ Parallelize GETs by requesting specific
byte ranges
â€¢ Better resilience in case of failures
Can be used to speed up downloads
File in S3
Byte-range request for header
(first XX bytes)
header
File in S3
Part 1
Part 2
Part N
â€¦
Can be used to retrieve only partial
data (for example the head of a file)
Requests in parallel
--- ç¬¬51é¡µç»“æŸ ---

```

### ç¬¬52-52é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬52é¡µ
S3 User-Defined Object Metadata & S3 Object Tags
â€¢ S3 User-Defined Object Metadata
â€¢ When uploading an object, you can also assign metadata
â€¢ Name-value (key-value) pairs
â€¢ User-defined metadata names must begin with "x-amz-meta-â€
â€¢ Amazon S3 stores user-defined metadata keys in lowercase
â€¢ Metadata can be retrieved while retrieving the object
â€¢ S3 Object Tags
â€¢ Key-value pairs for objects in Amazon S3
â€¢ Useful for fine-grained permissions (only access specific objects
with specific tags)
â€¢ Useful for analytics purposes (using S3 Analytics to group by tags)
â€¢ You cannot search the object metadata or object tags
â€¢ Instead, you must use an external DB as a search index such
as DynamoDB
S3 Object
Key
Value
Content-Length
7.5 KB
Content-Type
html
x-amz-meta-origin
paris
Metadata
DynamoDB Table
index data in
DDB Table
(searchable)
Key
Value
Project
Blue
PHI
True
Tags
--- ç¬¬52é¡µç»“æŸ ---

```

### ç¬¬53-53é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬53é¡µ
Amazon S3 â€“ Security
--- ç¬¬53é¡µç»“æŸ ---

```

### ç¬¬54-54é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬54é¡µ
Amazon S3 â€“ Object Encryption
â€¢ You can encrypt objects in S3 buckets using one of 4 methods
â€¢ Server-Side Encryption (SSE)
â€¢ Server-Side Encryption with Amazon S3-Managed Keys (SSE-S3) â€“ Enabled by
Default
â€¢ Encrypts S3 objects using keys handled, managed, and owned by AWS
â€¢ Server-Side Encryption with KMS Keys stored in AWS KMS (SSE-KMS)
â€¢ Leverage AWS Key Management Service (AWS KMS) to manage encryption keys
â€¢ Server-Side Encryption with Customer-Provided Keys (SSE-C)
â€¢ When you want to manage your own encryption keys
â€¢ Client-Side Encryption
â€¢ Itâ€™s important to understand which ones are for which situation for the exam
--- ç¬¬54é¡µç»“æŸ ---

```

### ç¬¬55-55é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬55é¡µ
Amazon S3 Encryption â€“ SSE-S3
â€¢ Encryption using keys handled, managed, and owned by AWS
â€¢ Object is encrypted server-side
â€¢ Encryption type is AES-256
â€¢ Must set header "x-amz-server-side-encryption": "AES256"
â€¢ Enabled by default for new buckets & new objects
Amazon S3
User
upload
HTTP(S) + Header
S3 Bucket
+
Object
S3 Owned Key
Encryption
--- ç¬¬55é¡µç»“æŸ ---

```

### ç¬¬56-56é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬56é¡µ
Amazon S3 Encryption â€“ SSE-KMS
â€¢ Encryption using keys handled and managed by AWS KMS (Key Management Service)
â€¢ KMS advantages: user control + audit key usage using CloudTrail
â€¢ Object is encrypted server side
â€¢ Must set header "x-amz-server-side-encryption": "aws:kms"
Amazon S3
User
upload
HTTP(S) + Header
S3 Bucket
+
Object
KMS Key
AWS KMS
Encryption
--- ç¬¬56é¡µç»“æŸ ---

```

### ç¬¬57-57é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬57é¡µ
SSE-KMS Limitation
â€¢ If you use SSE-KMS, you may be impacted
by the KMS limits
â€¢ When you upload, it calls the
GenerateDataKey KMS API
â€¢ When you download, it calls the Decrypt
KMS API
â€¢ Count towards the KMS quota per second
(5500, 10000, 30000 req/s based on region)
â€¢ You can request a quota increase using the
Service Quotas Console
KMS Key
S3 Bucket
Users
Upload / download
SSE-KMS
API call
--- ç¬¬57é¡µç»“æŸ ---

```

### ç¬¬58-58é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬58é¡µ
Amazon S3 Encryption â€“ SSE-C
â€¢ Server-Side Encryption using keys fully managed by the customer outside of AWS
â€¢ Amazon S3 does NOT store the encryption key you provide
â€¢ HTTPS must be used
â€¢ Encryption key must provided in HTTP headers, for every HTTP request made
Amazon S3
User
upload
HTTPS ONLY
+ Key in Header
S3 Bucket
+
Object
Client-Provided Key
+
Encryption
--- ç¬¬58é¡µç»“æŸ ---

```

### ç¬¬59-59é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬59é¡µ
Amazon S3 Encryption â€“ Client-Side Encryption
Amazon S3
S3 Bucket
â€¢ Use client libraries such as Amazon S3 Client-Side Encryption Library
â€¢ Clients must encrypt data themselves before sending to Amazon S3
â€¢ Clients must decrypt data themselves when retrieving from Amazon S3
â€¢ Customer fully manages the keys and encryption cycle
+
File
Client Key
File
(encrypted)
upload
HTTP(S)
Encryption
--- ç¬¬59é¡µç»“æŸ ---

```

### ç¬¬60-60é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬60é¡µ
Amazon S3 â€“ Encryption in transit (SSL/TLS)
â€¢ Encryption in flight is also called SSL/TLS
â€¢ Amazon S3 exposes two endpoints:
â€¢ HTTP Endpoint â€“ non encrypted
â€¢ HTTPS Endpoint â€“ encryption in flight
â€¢ HTTPS is recommended
â€¢ HTTPS is mandatory for SSE-C
â€¢ Most clients would use the HTTPS endpoint by default
--- ç¬¬60é¡µç»“æŸ ---

```

### ç¬¬61-61é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬61é¡µ
Amazon S3 â€“ Force Encryption in Transit
aws:SecureTransport
Account B
S3 Bucket
(my-bucket)
Bucket Policy
User
User
http
https
--- ç¬¬61é¡µç»“æŸ ---

```

### ç¬¬62-62é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬62é¡µ
Amazon S3 â€“ Default Encryption vs. Bucket Policies
â€¢ SSE-S3 encryption is automatically applied to new objects stored in S3 bucket
â€¢ Optionally, you can â€œforce encryptionâ€ using a bucket policy and refuse any API call
to PUT an S3 object without encryption headers (SSE-KMS or SSE-C)
â€¢ Note: Bucket Policies are evaluated before â€œDefault Encryptionâ€
--- ç¬¬62é¡µç»“æŸ ---

```

### ç¬¬63-63é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬63é¡µ
What is CORS?
â€¢ Cross-Origin Resource Sharing (CORS)
â€¢ Origin = scheme (protocol) + host (domain) + port
â€¢ example: https://www.example.com (implied port is 443 for HTTPS, 80 for HTTP)
â€¢ Web Browser based mechanism to allow requests to other origins while
visiting the main origin
â€¢ Same origin: http://example.com/app1 & http://example.com/app2
â€¢ Different origins: http://www.example.com & http://other.example.com
â€¢ The requests wonâ€™t be fulfilled unless the other origin allows for the
requests, using CORS Headers (example: Access-Control-Allow-Origin)
--- ç¬¬63é¡µç»“æŸ ---

```

### ç¬¬64-64é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬64é¡µ
What is CORS?
Web Server
(Origin)
https://www.example.com
Web Server
(Cross-Origin)
https://www.other.com
Web Browser
HTTPS Request
OPTIONS /
Host: www.other.com
Origin: https://www.example.com
Preflight Request
Access-Control-Allow-Origin: https://www.example.com
Access-Control-Allow-Methods: GET, PUT, DELETE
Preflight Response
GET /
Host: www.other.com
Origin: https://www.example.com
CORS Headers received already by the Origin
The Web Browser can make requests
--- ç¬¬64é¡µç»“æŸ ---

```

### ç¬¬65-65é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬65é¡µ
Amazon S3 â€“ CORS
â€¢ If a client makes a cross-origin request on our S3 bucket, we need to enable
the correct CORS headers
â€¢ Itâ€™s a popular exam question
â€¢ You can allow for a specific origin or for * (all origins)
Web Browser
S3 Bucket
(my-bucket-html)
(Static Website Enabled)
S3 Bucket
(my-bucket-assets)
(Static Website Enabled)
GET /index.html
Host: http://my-bucket-html.s3-website.us-west-2.amazonaws.com
index.html
GET /images/coffee.jpg
Host: http://my-bucket-assets.s3-website.us-west-2.amazonaws.com
Origin: http://my-bucket-html.s3-website.us-west-2.amazonaws.com
Access-Control-Allow-Origin: http://my-bucket-html.s3-website.us-west-2.amazonaws.com
--- ç¬¬65é¡µç»“æŸ ---

```

### ç¬¬66-66é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬66é¡µ
Amazon S3 â€“ MFA Delete
â€¢ MFA (Multi-Factor Authentication) â€“ force users to generate a code on a
device (usually a mobile phone or hardware) before doing important
operations on S3
â€¢ MFA will be required to:
â€¢ Permanently delete an object version
â€¢ Suspend Versioning on the bucket
â€¢ MFA wonâ€™t be required to:
â€¢ Enable Versioning
â€¢ List deleted versions
â€¢ To use MFA Delete, Versioning must be enabled on the bucket
â€¢ Only the bucket owner (root account) can enable/disable MFA Delete
Google Authenticator
MFA Hardware Device
--- ç¬¬66é¡µç»“æŸ ---

```

### ç¬¬67-67é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬67é¡µ
S3 Access Logs
â€¢ For audit purpose, you may want to log all access to S3 buckets
â€¢ Any request made to S3, from any account, authorized or denied,
will be logged into another S3 bucket
â€¢ That data can be analyzed using data analysis toolsâ€¦
â€¢ The target logging bucket must be in the same AWS region
â€¢ The log format is at:
https://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html
My-bucket
Logging Bucket
requests
Log all
requests
--- ç¬¬67é¡µç»“æŸ ---

```

### ç¬¬68-68é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬68é¡µ
S3 Access Logs: Warning
â€¢ Do not set your logging bucket to be the monitored bucket
â€¢ It will create a logging loop, and your bucket will grow exponentially
App Bucket &
Logging Bucket
Logging loop
PutObject
Do not try this at home J
--- ç¬¬68é¡µç»“æŸ ---

```

### ç¬¬69-69é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬69é¡µ
Amazon S3 â€“ Pre-Signed URLs
â€¢ Generate pre-signed URLs using the S3 Console, AWS CLI or SDK
â€¢ URL Expiration
â€¢ S3 Console â€“ 1 min up to 720 mins (12 hours)
â€¢ AWS CLI â€“ configure expiration with --expires-in parameter in seconds
(default 3600 secs, max. 604800 secs ~ 168 hours)
â€¢ Users given a pre-signed URL inherit the permissions of the user
that generated the URL for GET / PUT
â€¢ Examples:
â€¢ Allow only logged-in users to download a premium video from your S3
bucket
â€¢ Allow an ever-changing list of users to download files by generating URLs
dynamically
â€¢ Allow temporarily a user to upload a file to a precise location in your S3
bucket
S3 Bucket
(Private)
Owner
User
generate
pre-signed URL
URL
URL
URL
--- ç¬¬69é¡µç»“æŸ ---

```

### ç¬¬70-70é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬70é¡µ
S3 â€“ Access Points
S3 Bucket
/finance/â€¦
/sales/â€¦
Simple Bucket
Policy
Finance
Access Point
Sales
Access Point
Analytics
Access Point
Policy
Grant R/W to
/finance prefix
Policy
Grant R/W to
/sales prefix
Policy
Grant R to
entire bucket
Users
(Finance)
Users
(Sales)
Users
(Analytics)
â€¢ Access Points simplify security management for S3 Buckets
â€¢ Each Access Point has:
â€¢ its own DNS name (Internet Origin or VPC Origin)
â€¢ an access point policy (similar to bucket policy) â€“ manage security at scale
--- ç¬¬70é¡µç»“æŸ ---

```

### ç¬¬71-71é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬71é¡µ
S3 â€“ Access Points â€“ VPC Origin
â€¢ We can define the access
point to be accessible
only from within the VPC
â€¢ You must create a VPC
Endpoint to access the
Access Point (Gateway
or Interface Endpoint)
â€¢ The VPC Endpoint Policy
must allow access to the
target bucket and Access
Point
S3 Bucket
EC2 Instance
Access Point
VPC Origin
VPC Endpoint
VPC
Endpoint
Policy
Access Point
Policy
Bucket
Policy
--- ç¬¬71é¡µç»“æŸ ---

```

### ç¬¬72-72é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬72é¡µ
S3 Object Lambda
â€¢ Use AWS Lambda Functions to
change the object before it is
retrieved by the caller application
â€¢ Only one S3 bucket is needed, on
top of which we create S3 Access
Point and S3 Object Lambda Access
Points.
â€¢ Use Cases:
â€¢ Redacting personally identifiable
information for analytics or non-
production environments.
â€¢ Converting across data formats, such
as converting XML to JSON.
â€¢ Resizing and watermarking images on
the fly using caller-specific details, such
as the user who requested the object.
AWS Cloud
E-Commerce
Application
Analytics
Application
Marketing
Application
S3 Bucket
Supporting
S3 Access Point
Customer Loyalty
Database
Redacting
Lambda Function
Enriching
Lambda Function
S3 Object Lambda
Access Point
S3 Object Lambda
Access Point
Original
Object
Redacted
Object
Enriched
Object
--- ç¬¬72é¡µç»“æŸ ---

```

### ç¬¬73-73é¡µ

```
ä½ å°†æ¥æ”¶åˆ°ä¸€é¡µè‹±è¯­åŸæ–‡ï¼Œä½œä¸ºå°ç™½ï¼Œæˆ‘å®Œå…¨çœ‹ä¸æ‡‚è®°ä¸ä½å•Šï¼Œæ€ä¹ˆåŠï¼Ÿ
è§£é‡Šæ—¶ï¼Œå…ˆæä¾›å¦‚ä¸‹å†…å®¹
1. æ ¼å¼åŒ–å¥½çš„åŸæ–‡ï¼Œ
2. æ ¼å¼åŒ–ååŸæ–‡åŠå…¶é€å¥å¯¹åº”çš„å›½é™…éŸ³æ ‡
3. åŸæ–‡çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ
4. ç¼©å†™è¯¦è§£ï¼Œ
5. è‹±è¯­å…³é”®è¯è¯¦è§£ï¼Œ
6. é€Ÿè§ˆç‰ˆï¼ˆ30 ç§’å†…èƒ½è¯»å®Œï¼‰
ğŸ”‘ æœ¬é¡µé‡ç‚¹ï¼šä¸€å¥è¯æ€»ç»“
ğŸ“Œ å…³é”®è¯ï¼šæ ¸å¿ƒæœ¯è¯­
ğŸ¯ å­¦ä¹ æç¤ºï¼šæœ€å¯èƒ½å‡ºç°åœ¨è€ƒè¯•é‡Œçš„è€ƒç‚¹
7. å†é€šä¿—æ˜“æ‡‚çš„è§£é‡Šä¸€éï¼Œ
8. å°ç™½ä¹Ÿæ‡‚çš„è¯­è¨€å†è§£é‡Šä¸€éï¼Œ
9. æä¾›å°ç»“ï¼Œ
10. è®°å¿†å£è¯€ã€‚
è‹±è¯­åŸæ–‡å†…å®¹å¦‚ä¸‹ï¼š

ğŸŸ© ç¬¬73é¡µ
Amazon CloudFront
--- ç¬¬73é¡µç»“æŸ ---

```